# SPDX-License-Identifier: Apache-2.0

menuconfig FLOW
	bool "Flow - Fast Lightweight Object Wiring"
	select NET_BUF
	help
	  Enable the Flow subsystem. This provides a zero-copy
	  mechanism for distributing net_buf packets from sources to
	  multiple sinks using reference counting.

if FLOW

config FLOW_NAMES
	bool "Enable names for sources and sinks"
	default y if DEBUG
	help
	  Enable string names for packet sources, sinks, and event processors.
	  This adds a const char* field to each structure for debugging and
	  logging purposes. Disable to save memory in production builds.

config FLOW_STATS
	bool "Enable Flow statistics"
	default y if DEBUG
	help
	  Enable statistics tracking for packet sources and sinks.
	  This includes message counts, drop counts, and delivery counts.

config FLOW_RUNTIME_OBSERVERS
	bool "Runtime observer registration"
	help
	  Enable runtime registration and deregistration of observers.
	  If disabled, all connections must be defined at compile time.

config FLOW_RUNTIME_STACK_CHECK
	bool "Check for stack-allocated runtime connections"
	default y if DEBUG
	depends on FLOW_RUNTIME_OBSERVERS && THREAD_STACK_INFO
	help
	  Enable detection of stack-allocated connection structures when
	  adding runtime connections. This helps catch a common error where
	  connections are mistakenly allocated on the stack instead of
	  statically or dynamically. Automatically enabled in debug builds.

config FLOW_INIT_PRIORITY
	int "Flow subsystem initialization priority"
	default 99
	range 0 99
	help
	  Initialization priority for the Flow subsystem.
	  Should be high (late) to ensure sources and sinks are defined.

module = FLOW
module-str = flow
source "subsys/logging/Kconfig.template.log_config"

endif # FLOW