sample:
  description: Weave framework sensor monitoring sample
  name: weave_sensor_monitor

common:
  tags:
    - weave
    - threads
    - messaging
  harness: console
  harness_config:
    type: multi_line
    ordered: true
    regex:
      - "Weave Thread Integration Sample"
      - "Using clean API with direct method connections"
      - "Test 1: Configure sensor with low threshold"
      - "Config changed: old threshold=[0-9]+, new=[0-9]+"
      - "Test 2: Manual sensor reads"
      - "Manual read ch[0-9]+: value=[0-9]+"
      - "Test 3: Increase threshold"
      - "Threshold increased to [0-9]+"
      - "Test 4: Get statistics"
      - "Sensor Statistics:"
      - "Total reads:.*[0-9]+"

tests:
  weave.samples.sensor_monitor:
    platform_allow: native_sim
    integration_platforms:
      - native_sim
    tags:
      - weave
      - sample